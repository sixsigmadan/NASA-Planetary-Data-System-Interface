{"ts":1347071112186,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php\n// get data from the telnet server of horizons.jpl.nasa.gov\n// still very buggy and a lot to improve!\n\nrequire_once \"php-telnet/telnet.class.php\";\n\n$telnet = new Telnet('horizons.jpl.nasa.gov',6775);\n\n$telnet->exec(\"\");\n$telnet->exec(\"\");\n\nif (true) {\n\t\n\t$telnet->setPrompt(\"Select ... [E]phemeris, [F]tp, [M]ail, [R]edisplay, ?, <cr>:\");\n\t$result = $telnet->exec('Mars Barycenter');\n\tsleep(1);\n\n\t$telnet->setPrompt(\"Observe, Elements, Vectors  [o,e,v,?] :\");\n\t$result = $telnet->exec('E');\n\n\t$telnet->setPrompt(\":\");\n\t$result = $telnet->exec('v');\n\n\t//echo $result;\n\t$result = $telnet->exec('coord');\n\n\t//echo $result;\n\t$result = $telnet->exec('g');\n\n\t//echo $result;\n\t$result = $telnet->exec(\"1,2,3\");\n\n\t//echo $result;\n\t$result = $telnet->exec(\"eclip\");\n\n\t//echo $result;\n\t$result = $telnet->exec(\"2001-01-01 {00:00}\");\n\n\t//echo $result;\n\t$result = $telnet->exec(\"2001-06-01 {00:00}\");\n\n\t//echo $result;\n\t$telnet->setPrompt(\"Output interval [ex: 10m, 1h, 1d, ? ] :\");\n\n\t$result = $telnet->exec(\"1 d\");\n\n\t//echo $result;\n\t$telnet->setPrompt(\":\");\n\t$telnet->setPrompt(\">>>\");\n\t$result = $telnet->exec(\"y\");\n\tsleep(2);\n\t//echo $result;\n\t//$telnet->setPrompt(\"[R]edisplay, ? :\");\n\n\t//$telnet->setPrompt(\">>> Select... [A]gain, [N]ew-case, [F]tp, [K]ermit, [M]ail, [R]edisplay, ? :\");\n\n\t//$result = $telnet->exec(\"q\");\n\n\t//echo $result;\n\t$result = $telnet->exec(\"F\");\n\t\n\t//echo $result;\n\t$telnet->disconnect();\n\n\tsleep(1);\n\n\tpreg_match(\"[ftp://ssd.jpl.nasa\\.gov/pub/ssd/.*]\", $result, $file);\n\n\tprint_r($file);\n\n\tif ( count($file) > 0 && strlen($file[0]))\n\t{\n\t\techo $file[0];\n\t\t$contents = file_get_contents(trim($file[0]));\n\t\n\t\t// between this two lines is the data saved\n\t\t$k = strpos($contents,\"\\$\\$SOE\");\n\t\t$l = strpos($contents,\"\\$\\$EOE\");\n\n\t\t$contents = substr($contents,$k,$l-$k+5);\n\n\t\t$filename = \"tmp.data\"; // change here to another filename\n\t\t$handle = fopen($filename, \"w\");\n\n\t\t$parts = explode (\"\\n\",$contents);\n\n\t\tfor ($k = 0; $k < count($parts)/4-1; $k++ )\n\t\t{\n\t\t\tfwrite($handle,$parts[ $k*4 + 2 ]); // position\n\t\t\tfwrite($handle,$parts[ $k*4 + 3 ].\"\\r\\n\"); // velocity\n\t\t}\n\n\t\tfclose($handle);\n\t} else {\n\t\techo \"nothing to parse\";\n\t}\n} else {\n\techo \"no connection\";\n}\n?>\n"]],"start1":0,"start2":0,"length1":0,"length2":2190}]],"length":2190}
{"contributors":[],"silentsave":false,"ts":1347071134411,"patch":[[{"diffs":[[0,"improve!"],[1," It will get better. "],[0,"\n\nrequir"]],"start1":99,"start2":99,"length1":16,"length2":37}]],"length":2211,"saved":false}
